// 汉字部首分解数据 - 基于 CJK Decomposition Data
// 用于计算汉字语义相似度

const hanziDecompose = {
    // 格式: '字': ['部件1', '部件2', ...]
    // 常用汉字分解数据
    
    // 人部
    '人': ['人'],
    '亻': ['亻'],
    '他': ['亻', '也'],
    '们': ['亻', '门'],
    '你': ['亻', '尔'],
    '做': ['亻', '古', '攵'],
    '作': ['亻', '乍'],
    '住': ['亻', '主'],
    '位': ['亻', '立'],
    '低': ['亻', '氐'],
    '体': ['亻', '本'],
    '何': ['亻', '可'],
    '但': ['亻', '旦'],
    '佳': ['亻', '圭'],
    '估': ['亻', '古'],
    '使': ['亻', '吏'],
    '例': ['亻', '列'],
    '供': ['亻', '共'],
    '依': ['亻', '衣'],
    '侯': ['亻', '矢', '厂'],
    '保': ['亻', '呆'],
    '信': ['亻', '言'],
    '修': ['亻', '攸'],
    '倒': ['亻', '到'],
    '候': ['亻', '矦'],
    '借': ['亻', '昔'],
    '值': ['亻', '直'],
    '假': ['亻', '叚'],
    '偏': ['亻', '扁'],
    '停': ['亻', '亭'],
    '健': ['亻', '建'],
    '傻': ['亻', '囟', '夂'],
    '像': ['亻', '象'],
    
    // 女部
    '女': ['女'],
    '好': ['女', '子'],
    '妈': ['女', '马'],
    '姐': ['女', '且'],
    '姑': ['女', '古'],
    '妹': ['女', '未'],
    '姓': ['女', '生'],
    '娘': ['女', '良'],
    '婆': ['女', '波'],
    '婚': ['女', '昏'],
    '媳': ['女', '息'],
    '嫁': ['女', '家'],
    '嫌': ['女', '兼'],
    '奶': ['女', '乃'],
    '她': ['女', '也'],
    '如': ['女', '口'],
    '妻': ['女', '肀', '一'],
    '姨': ['女', '夷'],
    '娃': ['女', '圭'],
    '威': ['女', '戌'],
    '要': ['覀', '女'],
    
    // 口部
    '口': ['口'],
    '古': ['十', '口'],
    '可': ['丁', '口'],
    '只': ['口', '八'],
    '叫': ['口', '丩'],
    '右': ['ナ', '口'],
    '号': ['口', '丂'],
    '吃': ['口', '乞'],
    '同': ['冂', '口', '一'],
    '吗': ['口', '马'],
    '吧': ['口', '巴'],
    '听': ['口', '斤'],
    '告': ['牛', '口'],
    '员': ['口', '贝'],
    '呢': ['口', '尼'],
    '味': ['口', '未'],
    '呼': ['口', '乎'],
    '命': ['亼', '口', '卩'],
    '和': ['禾', '口'],
    '咱': ['口', '自'],
    '哥': ['可', '可'],
    '哪': ['口', '那'],
    '哭': ['犬', '口', '口'],
    '唱': ['口', '昌'],
    '喂': ['口', '畏'],
    '喜': ['壴', '口'],
    '喝': ['口', '曷'],
    '嗯': ['口', '恩'],
    '嘴': ['口', '觜'],
    '器': ['口', '口', '犬', '口', '口'],
    
    // 艹部
    '艹': ['艹'],
    '花': ['艹', '化'],
    '草': ['艹', '早'],
    '菜': ['艹', '采'],
    '菇': ['艹', '姑'],  // 菇 = 艹 + 姑，不是直接包含女
    '落': ['艹', '洛'],
    '著': ['艹', '者'],
    '蓝': ['艹', '监'],
    '药': ['艹', '约'],
    '藏': ['艹', '臧'],
    '苦': ['艹', '古'],
    '若': ['艹', '右'],
    '英': ['艹', '央'],
    '茶': ['艹', '余'],
    '荷': ['艹', '何'],
    '莲': ['艹', '连'],
    '萍': ['艹', '苹'],
    '葡': ['艹', '匍'],
    '蒙': ['艹', '冡'],
    '蔬': ['艹', '疏'],
    
    // 木部
    '木': ['木'],
    '本': ['木', '一'],
    '机': ['木', '几'],
    '术': ['木', '丶'],
    '村': ['木', '寸'],
    '杯': ['木', '不'],
    '板': ['木', '反'],
    '林': ['木', '木'],
    '果': ['田', '木'],
    '枝': ['木', '支'],
    '柜': ['木', '巨'],
    '树': ['木', '对'],
    '样': ['木', '羊'],
    '根': ['木', '艮'],
    '格': ['木', '各'],
    '桌': ['卓', '木'],
    '桥': ['木', '乔'],
    '梅': ['木', '每'],
    '检': ['木', '佥'],
    '棒': ['木', '奉'],
    '楼': ['木', '娄'],
    '概': ['木', '既'],
    '橘': ['木', '矞'],
    '森': ['木', '木', '木'],
    
    // 水氵部
    '水': ['水'],
    '氵': ['氵'],
    '汁': ['氵', '十'],
    '汉': ['氵', '又'],
    '江': ['氵', '工'],
    '池': ['氵', '也'],
    '没': ['氵', '殳'],
    '河': ['氵', '可'],
    '油': ['氵', '由'],
    '泪': ['氵', '目'],
    '法': ['氵', '去'],
    '波': ['氵', '皮'],
    '注': ['氵', '主'],
    '活': ['氵', '舌'],
    '洗': ['氵', '先'],
    '洋': ['氵', '羊'],
    '浅': ['氵', '戋'],
    '海': ['氵', '每'],
    '消': ['氵', '肖'],
    '深': ['氵', '罙'],
    '清': ['氵', '青'],
    '温': ['氵', '昷'],
    '游': ['氵', '斿'],
    '湖': ['氵', '胡'],
    '满': ['氵', '㒼'],
    '滴': ['氵', '啇'],
    '漂': ['氵', '票'],
    '潮': ['氵', '朝'],
    '澡': ['氵', '喿'],
    
    // 火灬部
    '火': ['火'],
    '灬': ['灬'],
    '灯': ['火', '丁'],
    '灰': ['厂', '火'],
    '炒': ['火', '少'],
    '炮': ['火', '包'],
    '炸': ['火', '乍'],
    '点': ['占', '灬'],
    '烟': ['火', '因'],
    '烦': ['火', '页'],
    '烧': ['火', '尧'],
    '烤': ['火', '考'],
    '热': ['执', '灬'],
    '焦': ['隹', '灬'],
    '然': ['肰', '灬'],
    '煤': ['火', '某'],
    '照': ['昭', '灬'],
    '熟': ['孰', '灬'],
    '燃': ['火', '然'],
    '爆': ['火', '暴'],
    '炉': ['火', '户'],
    '烂': ['火', '兰'],
    '煮': ['者', '灬'],
    '熊': ['能', '灬'],
    
    // 土部
    '土': ['土'],
    '在': ['才', '土'],
    '地': ['土', '也'],
    '场': ['土', '昜'],
    '坏': ['土', '不'],
    '块': ['土', '夬'],
    '坐': ['人', '人', '土'],
    '坑': ['土', '亢'],
    '址': ['土', '止'],
    '城': ['土', '成'],
    '培': ['土', '咅'],
    '基': ['其', '土'],
    '堂': ['尚', '土'],
    '堆': ['土', '隹'],
    '塑': ['朔', '土'],
    '墙': ['土', '啬'],
    '增': ['土', '曾'],
    '墨': ['黑', '土'],
    '壁': ['辟', '土'],
    '垃': ['土', '拉'],
    '圾': ['土', '及'],
    '坡': ['土', '皮'],
    '填': ['土', '真'],
    
    // 日部
    '日': ['日'],
    '早': ['日', '十'],
    '时': ['日', '寸'],
    '明': ['日', '月'],
    '星': ['日', '生'],
    '春': ['𡗗', '日'],
    '昨': ['日', '乍'],
    '映': ['日', '央'],
    '是': ['日', '𤴓'],
    '晒': ['日', '西'],
    '晚': ['日', '免'],
    '晴': ['日', '青'],
    '暖': ['日', '爰'],
    '暗': ['日', '音'],
    '曾': ['丷', '田', '日'],
    '最': ['冃', '取'],
    '景': ['日', '京'],
    '智': ['知', '日'],
    '暑': ['日', '者'],
    '晨': ['日', '辰'],
    '普': ['並', '日'],
    '曝': ['日', '暴'],
    '旦': ['日', '一'],
    '旧': ['丨', '日'],
    '旱': ['日', '干'],
    '昏': ['氐', '日'],
    '昔': ['𦣻', '日'],
    '晓': ['日', '尧'],
    '暂': ['斩', '日'],
    '曙': ['日', '署'],
    
    // 月部
    '月': ['月'],
    '有': ['ナ', '月'],
    '服': ['月', '𠬝'],
    '朋': ['月', '月'],
    '望': ['亡', '月', '王'],
    '期': ['其', '月'],
    '朗': ['良', '月'],
    '肉': ['肉'],
    '肚': ['月', '土'],
    '肝': ['月', '干'],
    '肤': ['月', '夫'],
    '肥': ['月', '巴'],
    '肩': ['户', '月'],
    '背': ['北', '月'],
    '胃': ['田', '月'],
    '胆': ['月', '旦'],
    '胖': ['月', '半'],
    '胜': ['月', '生'],
    '脑': ['月', '巛', '凵', '丶', '丶'],
    '脚': ['月', '却'],
    '脸': ['月', '佥'],
    '腿': ['月', '退'],
    '腰': ['月', '要'],
    '膀': ['月', '旁'],
    
    // 攵攴部
    '攵': ['攵'],
    '攴': ['攴'],
    '收': ['丩', '攵'],
    '改': ['己', '攵'],
    '放': ['方', '攵'],
    '政': ['正', '攵'],
    '故': ['古', '攵'],
    '效': ['交', '攵'],
    '教': ['孝', '攵'],
    '救': ['求', '攵'],
    '敌': ['舌', '攵'],
    '敢': ['耳', '攵'],
    '散': ['𠂹', '攵'],
    '敬': ['苟', '攵'],
    '数': ['娄', '攵'],
    '整': ['敕', '正'],
    '敲': ['高', '攵'],
    
    // 金钅部
    '金': ['金'],
    '钅': ['钅'],
    '钟': ['钅', '中'],
    '钢': ['钅', '冈'],
    '钱': ['钅', '戋'],
    '铁': ['钅', '失'],
    '铅': ['钅', '㕣'],
    '银': ['钅', '艮'],
    '铜': ['钅', '同'],
    '铃': ['钅', '令'],
    '铺': ['钅', '甫'],
    '链': ['钅', '连'],
    '锁': ['钅', '贝', '小'],
    '锅': ['钅', '呙'],
    '锋': ['钅', '夆'],
    '错': ['钅', '昔'],
    '键': ['钅', '建'],
    '镜': ['钅', '竟'],
    '镇': ['钅', '真'],
    '铭': ['钅', '名'],
    
    // 手扌部
    '手': ['手'],
    '扌': ['扌'],
    '打': ['扌', '丁'],
    '扔': ['扌', '乃'],
    '扑': ['扌', '卜'],
    '找': ['扌', '戈'],
    '把': ['扌', '巴'],
    '抓': ['扌', '爪'],
    '投': ['扌', '殳'],
    '折': ['扌', '斤'],
    '抱': ['扌', '包'],
    '抬': ['扌', '台'],
    '拉': ['扌', '立'],
    '拍': ['扌', '白'],
    '拔': ['扌', '犮'],
    '拿': ['合', '手'],
    '指': ['扌', '旨'],
    '挂': ['扌', '圭'],
    '按': ['扌', '安'],
    '挑': ['扌', '兆'],
    '挥': ['扌', '军'],
    '捉': ['扌', '足'],
    '换': ['扌', '奂'],
    '接': ['扌', '妾'],
    '推': ['扌', '隹'],
    '掉': ['扌', '卓'],
    '提': ['扌', '是'],
    '握': ['扌', '屋'],
    '摆': ['扌', '罢'],
    '摇': ['扌', '䍃'],
    '摔': ['扌', '率'],
    '撕': ['扌', '斯'],
    '播': ['扌', '番'],
    
    // 心忄部
    '心': ['心'],
    '忄': ['忄'],
    '必': ['心', '丿'],
    '忙': ['忄', '亡'],
    '忘': ['亡', '心'],
    '快': ['忄', '夬'],
    '怀': ['忄', '不'],
    '怎': ['乍', '心'],
    '怕': ['忄', '白'],
    '思': ['田', '心'],
    '急': ['刍', '心'],
    '怪': ['忄', '圣'],
    '恋': ['亦', '心'],
    '恐': ['巩', '心'],
    '息': ['自', '心'],
    '恨': ['忄', '艮'],
    '悄': ['忄', '肖'],
    '悔': ['忄', '每'],
    '悲': ['非', '心'],
    '情': ['忄', '青'],
    '惊': ['忄', '京'],
    '惜': ['忄', '昔'],
    '惨': ['忄', '参'],
    '想': ['相', '心'],
    '意': ['音', '心'],
    '感': ['咸', '心'],
    '愁': ['秋', '心'],
    '愿': ['原', '心'],
    '慢': ['忄', '曼'],
    '慌': ['忄', '荒'],
    '憾': ['忄', '感'],
    '懂': ['忄', '董'],
    '懒': ['忄', '赖'],
    
    // 言讠部
    '言': ['言'],
    '讠': ['讠'],
    '计': ['讠', '十'],
    '认': ['讠', '人'],
    '让': ['讠', '上'],
    '议': ['讠', '义'],
    '记': ['讠', '己'],
    '讲': ['讠', '井'],
    '许': ['讠', '午'],
    '论': ['讠', '仑'],
    '设': ['讠', '殳'],
    '访': ['讠', '方'],
    '诉': ['讠', '斥'],
    '证': ['讠', '正'],
    '评': ['讠', '平'],
    '词': ['讠', '司'],
    '试': ['讠', '式'],
    '话': ['讠', '舌'],
    '该': ['讠', '亥'],
    '详': ['讠', '羊'],
    '语': ['讠', '吾'],
    '误': ['讠', '吴'],
    '说': ['讠', '兑'],
    '请': ['讠', '青'],
    '诸': ['讠', '者'],
    '读': ['讠', '卖'],
    '课': ['讠', '果'],
    '调': ['讠', '周'],
    '谁': ['讠', '隹'],
    '谈': ['讠', '炎'],
    '谢': ['讠', '射'],
    '谱': ['讠', '普'],
    '识': ['讠', '只'],
    '警': ['敬', '言'],
    
    // 走辶部
    '走': ['走'],
    '辶': ['辶'],
    '起': ['走', '己'],
    '赶': ['走', '干'],
    '超': ['走', '召'],
    '越': ['走', '戉'],
    '趁': ['走', '㐱'],
    '趣': ['走', '取'],
    '边': ['辶', '力'],
    '达': ['辶', '大'],
    '过': ['辶', '寸'],
    '还': ['辶', '不'],
    '这': ['辶', '文'],
    '进': ['辶', '井'],
    '远': ['辶', '元'],
    '违': ['辶', '韦'],
    '连': ['辶', '车'],
    '迟': ['辶', '尺'],
    '迷': ['辶', '米'],
    '追': ['辶', '𠂤'],
    '退': ['辶', '艮'],
    '送': ['辶', '关'],
    '逃': ['辶', '兆'],
    '透': ['辶', '秀'],
    '通': ['辶', '甬'],
    '速': ['辶', '束'],
    '造': ['辶', '告'],
    '逼': ['辶', '畐'],
    '遇': ['辶', '禺'],
    '道': ['辶', '首'],
    '遍': ['辶', '扁'],
    '避': ['辶', '辟'],
    '选': ['辶', '先'],
    
    // 其他常用字
    '一': ['一'],
    '二': ['二'],
    '三': ['三'],
    '四': ['囗', '八'],
    '五': ['五'],
    '六': ['亠', '八'],
    '七': ['七'],
    '八': ['八'],
    '九': ['九'],
    '十': ['十'],
    '百': ['一', '白'],
    '千': ['千'],
    '万': ['万'],
    '上': ['上'],
    '下': ['下'],
    '大': ['大'],
    '小': ['小'],
    '中': ['口', '丨'],
    '长': ['长'],
    '不': ['不'],
    '个': ['亻', '丨'],
    '了': ['了'],
    '也': ['也'],
    '子': ['子'],
    '之': ['之'],
    '出': ['屮', '凵'],
    '多': ['夕', '夕'],
    '年': ['年'],
    '会': ['亼', '云'],
    '家': ['宀', '豕'],
    '国': ['囗', '玉'],
    '来': ['来'],
    '去': ['土', '厶'],
    '到': ['至', '刂'],
    '从': ['人', '人'],
    '看': ['手', '目'],
    '说': ['讠', '兑'],
    '很': ['彳', '艮'],
    '那': ['刀', '阝'],
    '就': ['京', '尤'],
    '着': ['羊', '目'],
    '给': ['纟', '合'],
    '自': ['自'],
    '己': ['己'],
    '吧': ['口', '巴'],
    '呢': ['口', '尼'],
    '得': ['彳', '旦', '寸'],
    '对': ['又', '寸'],
    '都': ['者', '阝'],
    '能': ['厶', '月', '匕', '匕'],
    '当': ['当'],
    '然': ['肰', '灬'],
    '所': ['户', '斤'],
    '以': ['亻', '人'],
    '因': ['囗', '大'],
    '为': ['为'],
    '而': ['而'],
    '但': ['亻', '旦'],
    '或': ['戈', '口', '一'],
    '与': ['与'],
    '及': ['及'],
    '其': ['其'],
    '等': ['竹', '寺'],
    '第': ['竹', '弟'],
    '门': ['门'],
    '问': ['门', '口'],
    '间': ['门', '日'],
    '开': ['开'],
    '关': ['关'],
    '儿': ['儿'],
    '东': ['东'],
    '西': ['西'],
    '南': ['十', '冂', '𢆉'],
    '北': ['北'],
    '前': ['前'],
    '后': ['厂', '口'],
    '里': ['里'],
    '外': ['夕', '卜'],
    '内': ['冂', '人'],
    '高': ['高'],
    '低': ['亻', '氐'],
    '新': ['亲', '斤'],
    '老': ['老'],
    '少': ['小', '丿'],
    '男': ['田', '力'],
    '学': ['学'],
    '生': ['生'],
    '事': ['事'],
    '物': ['牛', '勿'],
    '动': ['云', '力'],
    '工': ['工'],
    '业': ['业'],
    '公': ['八', '厶'],
    '民': ['民'],
    '主': ['主'],
    '和': ['禾', '口'],
    '平': ['干', '八'],
    '安': ['宀', '女'],
    '全': ['入', '王'],
    '定': ['宀', '疋'],
    '实': ['宀', '头'],
    '现': ['王', '见'],
    '理': ['王', '里'],
    '相': ['木', '目'],
    '系': ['系'],
    '组': ['纟', '且'],
    '部': ['咅', '阝'],
    '化': ['亻', '匕'],
    '文': ['文'],
    '史': ['口', '丿'],
    '正': ['一', '止'],
    '直': ['十', '目', '一'],
    '真': ['十', '具'],
    '知': ['矢', '口'],
    '道': ['辶', '首'],
    '理': ['王', '里'],
    '论': ['讠', '仑'],
    '法': ['氵', '去'],
    '则': ['贝', '刂'],
    '力': ['力'],
    '加': ['力', '口'],
    '办': ['力', '八'],
    '功': ['工', '力'],
    '助': ['且', '力'],
    '努': ['奴', '力'],
    '劳': ['艹', '冖', '力'],
    '势': ['执', '力'],
    '勇': ['甬', '力'],
    '勤': ['堇', '力'],
    '目': ['目'],
    '眼': ['目', '艮'],
    '睛': ['目', '青'],
    '看': ['手', '目'],
    '见': ['见'],
    '观': ['又', '见'],
    '视': ['礻', '见'],
    '耳': ['耳'],
    '听': ['口', '斤'],
    '闻': ['门', '耳'],
    '声': ['士', '殳'],
    '音': ['立', '日'],
    '足': ['口', '止'],
    '脚': ['月', '却'],
    '跑': ['足', '包'],
    '跳': ['足', '兆'],
    '踢': ['足', '易'],
    '路': ['足', '各'],
    '身': ['身'],
    '躺': ['身', '尚'],
    '首': ['首'],
    '头': ['头'],
    '脸': ['月', '佥'],
    '面': ['面'],
    '鼻': ['鼻'],
    '嘴': ['口', '觜'],
    '牙': ['牙'],
    '齿': ['齿'],
    '发': ['发'],
    '毛': ['毛'],
    '皮': ['皮'],
    '肉': ['肉'],
    '血': ['血'],
    '骨': ['骨'],
    '天': ['天'],
    '空': ['穴', '工'],
    '风': ['风'],
    '云': ['云'],
    '雨': ['雨'],
    '雪': ['雨', '彐'],
    '雷': ['雨', '田'],
    '电': ['电'],
    '阳': ['阝', '日'],
    '阴': ['阝', '月'],
    '山': ['山'],
    '石': ['石'],
    '河': ['氵', '可'],
    '海': ['氵', '每'],
    '湖': ['氵', '胡'],
    '草': ['艹', '早'],
    '花': ['艹', '化'],
    '树': ['木', '对'],
    '叶': ['口', '十'],
    '果': ['田', '木'],
    '鸟': ['鸟'],
    '鱼': ['鱼'],
    '虫': ['虫'],
    '马': ['马'],
    '牛': ['牛'],
    '羊': ['羊'],
    '猪': ['犭', '者'],
    '狗': ['犭', '句'],
    '猫': ['犭', '苗'],
    '鸡': ['又', '鸟'],
    '鸭': ['甲', '鸟'],
    '蛇': ['虫', '它'],
    '龙': ['龙'],
    '虎': ['虎'],
    '象': ['象'],
    '兔': ['兔'],
    '鹿': ['鹿'],
    '色': ['色'],
    '红': ['纟', '工'],
    '黄': ['黄'],
    '蓝': ['艹', '监'],
    '绿': ['纟', '录'],
    '白': ['白'],
    '黑': ['黑'],
    '紫': ['此', '糸'],
    '灰': ['厂', '火'],
    '青': ['青'],
    '粉': ['米', '分'],
    '金': ['金'],
    '银': ['钅', '艮'],
    '铜': ['钅', '同'],
    '铁': ['钅', '失'],
    '钢': ['钅', '冈'],
    '食': ['食'],
    '饭': ['饣', '反'],
    '饮': ['饣', '欠'],
    '饿': ['饣', '我'],
    '饱': ['饣', '包'],
    '饼': ['饣', '并'],
    '饺': ['饣', '交'],
    '馒': ['饣', '曼'],
    '馆': ['饣', '官'],
    '餐': ['餐'],
    '衣': ['衣'],
    '穿': ['穴', '牙'],
    '脱': ['月', '兑'],
    '帽': ['巾', '冒'],
    '帮': ['邦', '巾'],
    '袋': ['代', '衣'],
    '裤': ['衤', '库'],
    '裙': ['衤', '君'],
    '被': ['衤', '皮'],
    '褂': ['衤', '卦'],
    '车': ['车'],
    '船': ['舟', '㕣'],
    '飞': ['飞'],
    '机': ['木', '几'],
    '站': ['立', '占'],
    '港': ['氵', '巷'],
    '店': ['广', '占'],
    '房': ['户', '方'],
    '屋': ['尸', '至'],
    '楼': ['木', '娄'],
    '窗': ['穴', '囱'],
    '桌': ['卓', '木'],
    '椅': ['木', '奇'],
    '床': ['广', '木'],
    '柜': ['木', '巨'],
    '灯': ['火', '丁'],
    '门': ['门'],
    '窗': ['穴', '囱'],
    '墙': ['土', '啬'],
    '书': ['书'],
    '笔': ['竹', '毛'],
    '纸': ['纟', '氏'],
    '字': ['宀', '子'],
    '画': ['画'],
    '图': ['囗', '冬'],
    '报': ['扌', '卩', '又'],
    '网': ['冂', '𠃌'],
    '电': ['电'],
    '视': ['礻', '见'],
    '话': ['讠', '舌'],
    '信': ['亻', '言'],
    '邮': ['由', '阝'],
    '钟': ['钅', '中'],
    '表': ['表'],
    '镜': ['钅', '竟'],
    '刀': ['刀'],
    '剪': ['前', '刀'],
    '针': ['钅', '十'],
    '线': ['纟', '戋'],
    '绳': ['纟', '蝇'],
    '球': ['王', '求'],
    '棋': ['木', '其'],
    '牌': ['片', '卑'],
    '琴': ['珡', '今'],
    '歌': ['可', '欠'],
    '舞': ['舛', '無'],
    '戏': ['戏'],
    '影': ['景', '彡'],
    '照': ['昭', '灬'],
    '相': ['木', '目'],
    '片': ['片'],
    '张': ['弓', '长'],
    '份': ['亻', '分'],
    '块': ['土', '夬'],
    '根': ['木', '艮'],
    '条': ['攸', '木'],
    '双': ['又', '又'],
    '半': ['丷', '牛'],
    '只': ['口', '八'],
    '些': ['此', '二'],
    '每': ['每'],
    '别': ['另', '刂'],
    '各': ['夂', '口'],
    '种': ['禾', '中'],
    '级': ['纟', '及'],
    '类': ['米', '大'],
    '群': ['君', '羊'],
    '排': ['扌', '非'],
    '批': ['扌', '比'],
    '组': ['纟', '且'],
    '套': ['大', '镸'],
    '项': ['工', '页'],
    '份': ['亻', '分'],
    '件': ['亻', '牛'],
    '位': ['亻', '立'],
    '名': ['夕', '口'],
    '号': ['口', '丂'],
};

// 获取汉字的部件分解
function getDecomposition(char) {
    return hanziDecompose[char] || [char];
}

// 获取汉字的所有部件（包括字符本身和递归分解）
function getAllParts(char, visited = new Set()) {
    if (visited.has(char)) return new Set();
    visited.add(char);
    
    const parts = new Set([char]); // 包含字符本身
    const directParts = hanziDecompose[char];
    
    if (directParts) {
        for (const part of directParts) {
            parts.add(part);
            // 递归获取子部件
            const subParts = getAllParts(part, visited);
            for (const sp of subParts) {
                parts.add(sp);
            }
        }
    }
    
    return parts;
}

// 计算两个汉字的部首相似度
function calculateRadicalSimilarity(char1, char2) {
    // 完全相同
    if (char1 === char2) return 100;
    
    // 获取直接部件
    const directParts1 = hanziDecompose[char1] || [char1];
    const directParts2 = hanziDecompose[char2] || [char2];
    
    // 获取所有部件（包括递归分解）
    const parts1 = getAllParts(char1);
    const parts2 = getAllParts(char2);
    
    if (parts1.size === 0 || parts2.size === 0) return 0;
    
    // 特殊情况1：猜测字是目标字的直接部件（如猜"亻"，答案是"做"）
    if (directParts2.includes(char1)) {
        // char1 是 char2 的直接部件，应该得高分
        return 85;
    }
    
    // 特殊情况2：目标字是猜测字的直接部件
    if (directParts1.includes(char2)) {
        return 85;
    }
    
    // 特殊情况3：猜测字是目标字的间接部件（如猜"十"，答案是"做"，通过"古"）
    if (parts2.has(char1) && char1 !== char2) {
        return 75;
    }
    if (parts1.has(char2) && char1 !== char2) {
        return 75;
    }
    
    // 计算共同部件数
    let commonCount = 0;
    for (const part of parts1) {
        if (parts2.has(part)) {
            commonCount++;
        }
    }
    
    // 检查是否共享直接部件
    let sharedDirectParts = 0;
    for (const p1 of directParts1) {
        for (const p2 of directParts2) {
            if (p1 === p2) sharedDirectParts++;
        }
    }
    
    // 共享直接部件加分
    if (sharedDirectParts > 0) {
        // 共享的直接部件越多，分数越高
        const directBonus = Math.min(sharedDirectParts * 25, 75);
        const baseScore = (2 * commonCount) / (parts1.size + parts2.size) * 100;
        return Math.round(Math.max(baseScore, directBonus + 20));
    }
    
    // 使用 Dice 系数
    const diceScore = (2 * commonCount) / (parts1.size + parts2.size) * 100;
    
    return Math.round(diceScore);
}

// 获取两个汉字的共同部件
// 获取两个汉字的共同部件（包括递归分解）
function getCommonParts(char1, char2) {
    const parts1 = getAllParts(char1);
    const parts2 = getAllParts(char2);
    
    const common = [];
    
    for (const part of parts1) {
        if (parts2.has(part) && part !== char1 && part !== char2) {
            common.push(part);
        }
    }
    
    return common;
}

// 导出（浏览器环境）
if (typeof window !== 'undefined') {
    window.hanziDecompose = hanziDecompose;
    window.getDecomposition = getDecomposition;
    window.getAllParts = getAllParts;
    window.calculateRadicalSimilarity = calculateRadicalSimilarity;
    window.getCommonParts = getCommonParts;
}

// 导出（Node.js环境）
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        hanziDecompose,
        getDecomposition,
        getAllParts,
        calculateRadicalSimilarity,
        getCommonParts
    };
}
